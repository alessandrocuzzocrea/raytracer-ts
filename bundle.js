!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;var n=function(){function t(t,e,i){this.r=t,this.g=e,this.b=i}return t.Red=function(){return new t(231,76,60)},t.Black=function(){return new t(44,62,80)},t.Magenta=function(){return new t(155,89,182)},t}();e.Color=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vec3=void 0;var n=function(){function t(t,e,i){this.x=t,this.y=e,this.z=i}return t.Zero=function(){return new t(0,0,0)},t.prototype.Length=function(){var t=Math.pow(this.x,2),e=Math.pow(this.y,2),i=Math.pow(this.z,2);return Math.sqrt(t+e+i)},t.prototype.Normalized=function(){var e=this.Length();return new t(this.x/e,this.y/e,this.z/e)},t.prototype.Add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z)},t.prototype.Subtract=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)},t.prototype.ScalarMultiply=function(e){return new t(this.x*e,this.y*e,this.z*e)},t.prototype.Dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t}();e.Vec3=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),new(i(3).Raytracer)(640,480).render()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Raytracer=void 0;var n=i(4),o=function(){function t(t,e){var i=this;this.div=document.createElement("div"),document.body.append(this.div),this.viewport=new n.Viewport(this.div,t,e),this.clearButton=document.createElement("button"),this.clearButton.innerText="Clear",this.clearButton.onclick=function(){return i.clear()},this.div.appendChild(this.clearButton),this.fillRandomButton=document.createElement("button"),this.fillRandomButton.innerText="fillRandom",this.fillRandomButton.onclick=function(){return i.fillRandom()},this.div.appendChild(this.fillRandomButton),this.renderButton=document.createElement("button"),this.renderButton.innerText="render",this.renderButton.onclick=function(){return i.render()},this.div.appendChild(this.renderButton),this.saveToPNGButton=document.createElement("button"),this.saveToPNGButton.innerText="saveToPNG",this.saveToPNGButton.onclick=function(){return i.saveToPNG()},this.div.appendChild(this.saveToPNGButton)}return t.prototype.clear=function(){this.viewport.clear()},t.prototype.fillRandom=function(){this.viewport.fillRandom()},t.prototype.render=function(){this.viewport.render()},t.prototype.saveToPNG=function(){this.viewport.saveToPNG()},t}();e.Raytracer=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Viewport=void 0;var n=i(5),o=i(1),r=i(6),s=i(0),h=i(9),u=function(){function t(t,e,i){this.width=e,this.height=i,this.canvas=document.createElement("canvas"),t.appendChild(this.canvas),this.context=this.canvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height,this.clear(),this.sphere=new r.Sphere(new o.Vec3(0,0,3),1,s.Color.Red()),this.light=new h.Light(new o.Vec3(1e3,0,3))}return t.prototype.clear=function(){this.context.fillStyle="gray",this.context.fillRect(0,0,this.width,this.height)},t.prototype.fillRandom=function(){for(var t=this.context.getImageData(0,0,this.width,this.height),e=0;e<this.width*this.height*4;)t.data[e+0]=255*Math.random(),t.data[e+1]=255*Math.random(),t.data[e+2]=255*Math.random(),e+=4;this.context.putImageData(t,0,0)},t.prototype.render=function(){for(var t=this.context.getImageData(0,0,this.width,this.height),e=0;e<this.height;e++)for(var i=0;i<this.width;i++){var r=this.width/this.height,s=r/this.width*i-r/2,h=1/this.height*e-.5,u=new n.Ray(new o.Vec3(0,0,0),new o.Vec3(s,h,1)),a=this.width*e+i,c=this.sphere.intersect(u);if(c.hit){var l=this.light.position.Subtract(c.hitPoint).Normalized(),d=Math.max(0,l.Dot(c.normal)),f=c.GetColor();t.data[4*a+0]=f.r*d,t.data[4*a+1]=f.g*d,t.data[4*a+2]=f.b*d}}this.context.putImageData(t,0,0)},t.prototype.saveToPNG=function(){window.open().document.body.innerHTML='<img src="'+this.canvas.toDataURL()+'">'},t}();e.Viewport=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ray=void 0;var n=function(){function t(t,e){this.origin=t,this.direction=e.Normalized()}return t.prototype.CalcPointAtT=function(t){return this.origin.Add(this.direction.ScalarMultiply(t))},t}();e.Ray=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sphere=void 0;var n=i(1),o=i(7),r=i(0),s=function(){function t(t,e,i){this.origin=t,this.radius=e,this.color=i}return t.prototype.intersect=function(t){var e=t.origin.x,i=t.origin.y,s=t.origin.z,h=t.direction.x,u=t.direction.y,a=t.direction.z,c=this.origin.x,l=this.origin.y,d=this.origin.z,f=this.radius,p=Math.pow(h,2)+Math.pow(u,2)+Math.pow(a,2),v=2*(h*(e-c)+u*(i-l)+a*(s-d)),y=Math.pow(e-c,2)+Math.pow(i-l,2)+Math.pow(s-d,2)-Math.pow(f,2),w=Math.pow(v,2)-4*p*y;if(w>=0){var g=(-v-Math.sqrt(w))/2*p,m=e+h*g,M=i+u*g,b=s+a*g,x=new n.Vec3(m,M,b),_=new n.Vec3((m-c)/f,(M-l)/f,(b-d)/f);return new o.HitInfo(!0,x,_,new r.Color(this.color.r,this.color.g,this.color.b))}return new o.HitInfo(!1,null,null,null)},t}();e.Sphere=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HitInfo=void 0;var n=i(0),o=i(8),r=function(){function t(t,e,i,n){this.hit=t,this.hitPoint=e,this.normal=i,this.color=n}return t.prototype.GetColor=function(){return o.Consts.DEBUG_NORMALS?new n.Color(255*this.normal.x,255*this.normal.y,255*this.normal.z*-1):new n.Color(this.color.r,this.color.g,this.color.b)},t}();e.HitInfo=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Consts=void 0;var n=function(){function t(){}return t.DEBUG_NORMALS=!1,t}();e.Consts=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Light=void 0;var n=function(t){this.position=t};e.Light=n}]);
//# sourceMappingURL=bundle.js.map